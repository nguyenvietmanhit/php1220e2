!function(t){"use strict";t.Zebra_Tooltips=function(o,e){var i,n,s,a,r={animation_speed:250,animation_offset:20,background_color:"#000",close_on_click:!0,color:"#FFF",content:!1,default_position:"above",hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},l=this,_=function(o){var e,r,_,c,h,w,f,u,g,m,b,T,y,v,Z,k=o.data("Zebra_Tooltip");return k.tooltip||(e=t("<div>",{class:"Zebra_Tooltip",css:{opacity:0,display:"block"}}),r=t("<div>",{class:"Zebra_Tooltip_Message",css:{maxWidth:l.settings.max_width,backgroundColor:l.settings.background_color,color:l.settings.color}}).html(l.settings.content?l.settings.content:k.content).appendTo(e),_=t("<div>",{class:"Zebra_Tooltip_Arrow"}).appendTo(e),c=t("<div>").appendTo(_),l.settings.keep_visible&&(e.on("mouseleave"+(l.settings.close_on_click?" click":""),function(){p(o)}),e.on("mouseenter",function(){d(o)})),e.appendTo("body"),h=e.outerWidth(),w=e.outerHeight(),f=c.outerWidth(),u=c.outerHeight(),g=r.outerWidth(),m=r.outerHeight(),k={tooltip:e,tooltip_width:h,tooltip_height:w+u/2,message:r,arrow_container:_,arrow_width:f,arrow_height:u,arrow:c},e.css({width:k.tooltip_width,height:k.tooltip_height}),k.tooltip_width=k.tooltip_width+(r.outerWidth()-g),k.tooltip_height=k.tooltip_height+(r.outerHeight()-m),e.css({width:k.tooltip_width,height:k.tooltip_height,display:"none"}),k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),k.sticky&&!k.close&&(t("<a>",{class:"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("x").on("click",function(t){t.preventDefault();var e=o.data("Zebra_Tooltip");e.sticky=!1,o.data("Zebra_Tooltip",e),p(o)}).appendTo(k.message),k.close=!0,k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),(k.window_resized||k.window_scrolled)&&(b=t(window),k.window_resized&&(i=b.width(),n=b.height(),T=o.offset(),t.extend(k,{element_left:T.left,element_top:T.top,element_width:o.outerWidth(),element_height:o.outerHeight()})),a=b.scrollTop(),s=b.scrollLeft(),y="left"===l.settings.position?k.element_left-k.tooltip_width+k.arrow_width:"right"===l.settings.position?k.element_left+k.element_width-k.arrow_width:k.element_left+(k.element_width-k.tooltip_width)/2,v=k.element_top-k.tooltip_height,Z="left"===l.settings.position?k.tooltip_width-k.arrow_width-k.arrow_width/2:"right"===l.settings.position?k.arrow_width/2:(k.tooltip_width-k.arrow_width)/2,y+k.tooltip_width>i+s&&(Z-=i+s-(y+k.tooltip_width)-6,y=i+s-k.tooltip_width-6,Z+k.arrow_width>k.tooltip_width-6&&(Z=k.tooltip_width-6-k.arrow_width),y+Z+k.arrow_width/2<k.element_left&&(Z=-1e4)),y<s&&(Z-=s-y,y=s+2,Z<0&&(Z=k.arrow_width/2),y+Z+k.arrow_width/2>k.element_left+k.element_width&&(Z=-1e4)),k.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top"),k.arrow_container.addClass("Zebra_Tooltip_Arrow_Bottom"),k.message.css("margin-top",""),k.arrow.css("borderColor",l.settings.background_color+" transparent transparent"),v<a||"below"===l.settings.default_position&&k.element_top+k.element_height+l.settings.vertical_offset+k.tooltip_height+k.animation_offset<n+a?(v=k.element_top+k.element_height-l.settings.vertical_offset,k.animation_offset=Math.abs(k.animation_offset),k.message.css("margin-top",k.arrow_height/2),k.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom"),k.arrow_container.addClass("Zebra_Tooltip_Arrow_Top"),k.arrow.css("borderColor","transparent transparent "+l.settings.background_color)):(k.animation_offset=-Math.abs(k.animation_offset),v+=l.settings.vertical_offset),k.arrow_container.css("left",Z),k.tooltip.css({left:y,top:v}),t.extend(k,{tooltip_left:y,tooltip_top:v,arrow_left:Z}),k.window_resized=!1,k.window_scrolled=!1,k=t.extend(o.data("Zebra_Tooltip"),k),o.data("Zebra_Tooltip",k)),k},d=function(t){var o=t.data("Zebra_Tooltip");clearTimeout(o.show_timeout),o.muted||(clearTimeout(o.hide_timeout),o.show_timeout=setTimeout(function(){o=_(t),l.settings.onBeforeShow&&"function"==typeof l.settings.onBeforeShow&&!1===l.settings.onBeforeShow(t,o.tooltip)||("block"!==o.tooltip.css("display")&&o.tooltip.css({top:o.tooltip_top+o.animation_offset}),o.tooltip.css("display","block"),o.tooltip.stop(),o.tooltip.animate({top:o.tooltip_top,opacity:l.settings.opacity},l.settings.animation_speed,function(){l.settings.onShow&&"function"==typeof l.settings.onShow&&l.settings.onShow(t,o.tooltip)}))},l.settings.show_delay))},p=function(o){var e=o.data("Zebra_Tooltip");clearTimeout(e.hide_timeout),e.sticky||(clearTimeout(e.show_timeout),e.hide_timeout=setTimeout(function(){if(e.tooltip){if(l.settings.onBeforeHide&&"function"==typeof l.settings.onBeforeHide&&!1===l.settings.onBeforeHide(o,e.tooltip))return;e.close=!1,e.destroy&&(e.muted=!0),o.data("Zebra_Tooltip",e),t("a.Zebra_Tooltip_Close",e.tooltip).remove(),e.tooltip.stop(),e.tooltip.animate({opacity:0,top:e.tooltip_top+e.animation_offset},l.settings.animation_speed,function(){t(this).css("display","none"),l.settings.onHide&&"function"==typeof l.settings.onHide&&l.settings.onHide(o,e.tooltip)})}},l.settings.hide_delay))};l.settings={},l.hide=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),p(o))})},l.show=function(o,e){o.each(function(){var o=t(this),i=o.data("Zebra_Tooltip");i&&(i.sticky=!0,i.muted=!1,e&&(i.destroy=!0),o.data("Zebra_Tooltip",i),d(o))})},function(){l.settings=t.extend({},r,e),o.each(function(){var o=t(this),e=o.attr("title"),i=o.data("zebra-tooltip");(e&&""!==e||i&&""!==i||void 0!==l.settings.content)&&(o.on({mouseenter:function(){e&&t(this).attr("title",""),d(o)},mouseleave:function(){p(o),e&&t(this).attr("title",e)}}),o.data("Zebra_Tooltip",{tooltip:null,content:i||e||"",window_resized:!0,window_scrolled:!0,show_timeout:null,hide_timeout:null,animation_offset:l.settings.animation_offset,sticky:!1,destroy:!1,muted:!1}),l.settings.prerender&&_(o))}),t(window).on("scroll resize",function(e){o.each(function(){var o=t(this).data("Zebra_Tooltip");o&&("scroll"===e.type?o.window_scrolled=!0:o.window_resized=!0,t(this).data("Zebra_Tooltip",o))})})}()}}($);